I"ø<p>æ¸¬è©¦æ±è¥¿çš„æ™‚å€™å¸¸éœ€è¦ä¸€å€‹å¾ˆç°¡å–®çš„ Linux VMï¼Œå‰›å¥½ Arch çš„æª”æ¡ˆå°ï¼Œå®‰è£é€Ÿåº¦ä¹Ÿå¿«ï¼Œç‚ºäº†ä»¥å¾Œä¸è¦å†æ¡å‘ï¼Œå¯«äº†é€™ç¯‡ç­†è¨˜ä¾†ç°¡å–®ç´€éŒ„ä¸€ä¸‹æ€éº¼ç”¨ Live iso å®‰è£ Archlinux.
<!--description--></p>

<p>æœ¬ç¯‡æ–‡ç« å¾<a href="https://wiki.archlinux.org/title/Installation_guide">å®˜ç¶²æ•™å­¸</a>ç¯€éŒ„è€Œä¾†ï¼Œä½¿ç”¨ <strong>BIOS</strong> ç³»çµ±ï¼ˆå¤§éƒ¨åˆ†VMè»Ÿé«”é è¨­æ˜¯é€™å€‹ï¼‰çš„å®‰è£éç¨‹ã€‚æ‰“é–‹ä½ å–œæ­¡çš„ VM è»Ÿé«”ï¼Œç”¨æŠ“ä¸‹ä¾†çš„ Live iso é–‹æ©Ÿä¹‹å¾Œï¼Œé€²è¡Œä»¥ä¸‹æ­¥é©Ÿã€‚</p>

<h1 id="æ­¥é©Ÿ">æ­¥é©Ÿ</h1>
<hr />
<h2 id="disk-partition">Disk Partition</h2>

<p>å…ˆç”¨<code class="language-plaintext highlighter-rouge">lsblk</code>çœ‹ä¸€ä¸‹ä½ çš„ç£ç¢Ÿå«ä»€éº¼åå­—ï¼Œç„¶å¾Œé€²è¡Œåˆ†å‰²çš„å‹•ä½œ:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fdisk /dev/sda   <span class="c"># Or whatever the disk is called</span>
</code></pre></div></div>

<p>æˆ‘å€‘éœ€è¦è‡³å°‘ä¸‰å€‹Partition:</p>

<ol>
  <li>1MB for <code class="language-plaintext highlighter-rouge">BIOS Boot</code> (No need to choose type)</li>
  <li>256MB Swap, choose <code class="language-plaintext highlighter-rouge">swap</code> type in fdisk</li>
  <li>Use rest of the space as one partition</li>
</ol>

<h3 id="formatting">Formatting</h3>
<p>å†ä¾†æˆ‘å€‘éœ€è¦æŠŠé€™äº› Partition æ ¼å¼åŒ–ã€‚</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkswap /dev/sda2  <span class="c"># è™•ç†swap</span>
swapon /dev/sda2
mkfs.ext4 /dev/sda3 <span class="c"># å»ºç«‹æª”æ¡ˆç³»çµ±</span>
</code></pre></div></div>
<p>ç„¶å¾Œæ›è¼‰åˆ°<code class="language-plaintext highlighter-rouge">/mnt</code>ã€‚</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">mount /dev/sda3 /mnt</code></li>
</ul>

<h2 id="install-using-pacstrap">Install using pacstrap</h2>

<p><code class="language-plaintext highlighter-rouge">pacstrap /mnt ...</code> å¯ä»¥å¹«æˆ‘å€‘è£å¥½å¾ˆå¤šæ±è¥¿ã€‚</p>

<ul>
  <li><strong>TL;DR</strong>: <code class="language-plaintext highlighter-rouge">pacstrap /mnt base linux linux-firmware networkmanager grub sudo vim</code></li>
</ul>

<p>è§£é‡‹ä¸€ä¸‹ï¼š</p>

<ul>
  <li>åŸºæœ¬çš„ Linux è¦ç”¨çš„æ±è¥¿: <code class="language-plaintext highlighter-rouge">base linux linux-firmware</code></li>
  <li>ç¶²è·¯è‡ªå‹•è¨­å®šï¼Œä¸ç„¶æœƒé€£ä¸åˆ°: <code class="language-plaintext highlighter-rouge">networkmanager</code></li>
  <li>æ—¢ç„¶éƒ½è¦è£æ±è¥¿äº†é‚£å°±é †ä¾¿: <code class="language-plaintext highlighter-rouge">grub sudo vim</code></li>
</ul>

<h2 id="fstab-arch-chroot-systemd">fstab, arch-chroot, systemd</h2>

<p>è¨­å®šé–‹æ©Ÿè‡ªå‹•mountï¼Œä¸¦è¨­å®šç¶²è·¯ã€‚æ¥ä¸‹ä¾†çš„æ­¥é©Ÿè¦åœ¨æ–°çš„æª”æ¡ˆç³»çµ±è£¡åšï¼Œæ‰€ä»¥è¦<code class="language-plaintext highlighter-rouge">arch-chroot</code>ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>genfstab <span class="nt">-U</span> /mnt <span class="o">&gt;&gt;</span> /mnt/etc/fstab
arch-chroot /mnt
systemctl <span class="nb">enable </span>NetworkManager
</code></pre></div></div>

<h2 id="user-and-password">User and password</h2>

<p>è¨­å®šrootçš„å¯†ç¢¼ï¼Œå»ºç«‹æ–°çš„ä½¿ç”¨è€…ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd  <span class="c"># change root pw</span>

<span class="c"># å¦‚æœä½ è¦å»ºç«‹ä½¿ç”¨è€…çš„è©±æ‰åšï¼Œä¸ç”¨çš„è©±å¯ä»¥è·³é</span>
useradd ckb <span class="c"># ç•¶ç„¶ä½ è¦æŠŠckbæ›æˆè‡ªå·±çš„ä½¿ç”¨è€…åç¨±</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /home/ckb
<span class="nb">chown </span>ckb:ckb /home/ckb
visudo <span class="c"># if you want to give it sudo, add line: ckb ALL=(ALL) ALL</span>
</code></pre></div></div>

<h2 id="grub">GRUB</h2>

<p>è£Grubï¼Œè¦ä¸ç„¶é–‹ä¸äº†æ©Ÿã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grub-install <span class="nt">--target</span><span class="o">=</span>i386-pc /dev/sda
grub-mkconfig <span class="nt">-o</span> /boot/grub/grub.cfg
</code></pre></div></div>

<h2 id="finishing-up">Finishing up</h2>

<p>é€€å‡ºarch-chrootï¼Œç„¶å¾Œé‡æ–°é–‹æ©Ÿã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">exit</span> <span class="c"># from chroot</span>
umount <span class="nt">-R</span> /mnt
reboot
</code></pre></div></div>

<p>é€™æ¨£å­å°±è£å¥½äº†ï¼Œå¦‚æœé–‹æ©Ÿèµ·ä¾†çœ‹åˆ°çš„æ˜¯live isoçš„ç•«é¢çš„è©±ï¼Œé¸æ“‡ â€œBoot from existing OSâ€ é–‹æ©Ÿï¼Œç„¶å¾ŒæŠŠä½ çš„live isoæ‹”æ‰ã€‚</p>

<h1 id="references">References</h1>
<ul>
  <li>å®˜ç¶²æ•™å­¸: https://wiki.archlinux.org/title/Installation_guide</li>
  <li>PastLeo - ArchLinux 2020 å®‰è£ç­†è¨˜: https://pastleo.me/post/20200719-arch-linux-installation</li>
</ul>
:ET